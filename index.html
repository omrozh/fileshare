<body>
    <center>
        <style>
        .loader {
                margin-top: 15px;
                border: 5px solid #f3f3f3; /* Light grey */
                border-top: 5px solid #3498db; /* Blue */
                border-radius: 50%;
                width: 30px;
                height: 30px;
                animation: spin 2s linear infinite;
                }

                @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); 
                }
            }
    </style>
        <br>
        Upload a file
        <input class="form-control"  style="width: 30%;" type="file" id="file">
        <div id="loadercircle"></div>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

        <br>
        View a file already uploaded

        <input type="text" class="form-control" style="width: 30%;" id="fileid">
        <br>
        <input type="button" class="btn btn-primary" style="width: 15%" onclick="downloadfile()" value="View File">

    </center>

    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-storage.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>

    <script>
    
    var firebaseConfig = {
        apiKey: "AIzaSyDS8qWbef0BDAZ9FgyBKkdo9OUACa6zois",
        authDomain: "file-store-6094b.firebaseapp.com",
        databaseURL: "https://file-store-6094b.firebaseio.com",
        projectId: "file-store-6094b",
        storageBucket: "file-store-6094b.appspot.com",
        messagingSenderId: "326686979503",
        appId: "1:326686979503:web:a79808e8c3c5edaab4ab5a",
        measurementId: "G-ZS7DDXF3M0"
    };

    firebase.initializeApp(firebaseConfig);

    fileuploader = document.getElementById("file")

    fileuploader.addEventListener("change", function(e){
        document.getElementById("loadercircle").className = "loader"
        var filecode = parseInt(Math.random() * 10000000);
        var upload = e.target.files[0];
        var storageref = firebase.storage().ref("files/" + filecode);
        storageref.put(upload).then(function(){
            document.getElementById("loadercircle").className = "noloading"
            alert("Upload complete, your file code is: " + filecode);
        })
    })

    function downloadfile(){
        var fileid = document.getElementById("fileid").value;
        window.location = "https://firebasestorage.googleapis.com/v0/b/file-store-6094b.appspot.com/o/files%2F" + fileid + "?alt=media&token=709b6728-023d-4c7e-b118-d459bc2794c3"
    }
    
    </script>
</body>
